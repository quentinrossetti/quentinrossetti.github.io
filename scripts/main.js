function retina(){window.devicePixelRatio>1.5&&$(".retina").each(function(){var e=$(this);e.attr("src",e.attr("src").replace(".png","@2x.png")),e.load(function(){var t=this;e.attr("width",t.clientWidth/2+"px")})}),Modernizr.svg||$("img[src$='.svg']").each(function(){$(this).attr("src",$(this).attr("src").replace(".svg",".png"))})}var page=function(e){$.get("pages/"+e+".html").fail(function(){return this}).done(function(t){var a=$("#preload");a.addClass("preload-start"),setTimeout(function(){$("#content").html(t),retina()},500),setTimeout(function(){a.removeClass("preload-start")},1e3);var n=$("#wrapper > header > nav a"),r={home:0,projects:1,contact:2};$.each(n,function(e,t){$(t).removeClass("active")}),$(n[r[e]]).addClass("active")})};routie({"/projects":function(){page("projects")},"/contact":function(){page("contact")},"*":function(){page("home")}}),function(e){var t="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"]},e.expr[":"].uncached=function(t){if(!e(t).is('img[src!=""]'))return!1;var a=new Image;return a.src=t.src,!a.complete},e.fn.waitForImages=function(a,n,r){var c=0,i=0;if(e.isPlainObject(arguments[0])&&(r=arguments[0].waitForAll,n=arguments[0].each,a=arguments[0].finished),a=a||e.noop,n=n||e.noop,r=!!r,!e.isFunction(a)||!e.isFunction(n))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var o=e(this),s=[],u=e.waitForImages.hasImageProperties||[],l=/url\(\s*(['"]?)(.*?)\1\s*\)/g;r?o.find("*").addBack().each(function(){var t=e(this);t.is("img:uncached")&&s.push({src:t.attr("src"),element:t[0]}),e.each(u,function(e,a){var n,r=t.css(a);if(!r)return!0;for(;n=l.exec(r);)s.push({src:n[2],element:t[0]})})}):o.find("img:uncached").each(function(){s.push({src:this.src,element:this})}),c=s.length,i=0,0===c&&a.call(o[0]),e.each(s,function(r,s){var u=new Image;e(u).on("load."+t+" error."+t,function(e){return i++,n.call(s.element,i,c,"load"==e.type),i==c?(a.call(o[0]),!1):void 0}),u.src=s.src})})}}(jQuery),$(document).ready(function(){});